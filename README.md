# Note Player

A simple note player that plays notes based on input text. This project aims to provide an easy way to create and play musical notes from text files. It parses note information from a given input file and generates a WAV file as output.

## Table of Contents

- [Background Knowledge](#background-knowledge)
- [Run Locally](#run-locally)
- [File Format](#file-format)
- [Examples](#examples)
- [How It Works](#how-it-works)
- [Acknowledgements](#acknowledgements)
- [License](#license)

## Background Knowledge

This program uses a frequency table to map note names to their respective frequencies. The frequency of a note is calculated using the following formula:

$$
Frequency = BaseFrequency \times 2^{(Octave - ReferenceOctave)}
$$

The project uses basic concepts of digital signal processing, such as sampling and harmonic synthesis, to generate the audio samples for each note. A simple additive synthesis method is used to create the sound of each note by combining the amplitudes of its harmonics.

The generated audio samples are then written to a WAV file, which is a common file format for storing audio data. WAV files use pulse-code modulation (PCM) to represent the amplitude of the audio signal at regular intervals. In this project, we use a sample rate of 44100 Hz, which means the audio signal is sampled 44100 times per second.

## Run Locally

### 1. Clone the project
```bash
git clone https://github.com/Hiyabye/NotePlayer.git
```

### 2. Navigate to the project directory
```bash
cd NotePlayer
```

### 3. Build the project
```bash
make
```

### 4. Run the project with the input file (using example/star.txt in this example)
```bash
./music example/star.txt
```

## File Format

The input file should be a text file with the following format:
```
<tempo>
<total beats>
<starting beat> <note> <duration>
<starting beat> <note> <duration>
...
```

- **tempo**: The number of beats per minute.
- **total beats**: The total number of beats in the song.
- **starting beat**: The beat at which the note starts.
- **note**: The note to be played.
- **duration**: The number of beats the note is played for.

## Examples
- [example/star.txt](example/star.txt) is based on [Twinkle, Twinkle Little Star-Jazzy](https://www.free-scores.com/download-sheet-music.php?pdf=16329)
- [example/mii.txt](example/mii.txt) is based on [Mii Channel Music](https://musescore.com/pimplup/mii-channel)

## How It Works

1. Read the input file and parse the tempo, total beats, and notes.
2. Calculate the frequency of each note using the frequency table.
3. Generate audio samples for each note using additive synthesis and a buffer to store the samples.
4. Write the audio samples to a WAV file with the appropriate header.

## Acknowledgements
- [Frequency Table](https://pages.mtu.edu/~suits/notefreqs.html) - The frequency table was taken from this website.
- [GPT-4](https://chat.openai.com) - Most of the code, especially the part that generates the WAV file, was generated by GPT-4. It also wrote this README file.

## License
This project is licensed under the [GNU GPLv3](https://choosealicense.com/licenses/gpl-3.0/).